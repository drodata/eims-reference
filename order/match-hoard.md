# 匹配备货

如果业务员给之前申请过备货的客户新建一个订单，那么业务员需要手动来确定订单中的每个商品是否使用之前的某个备货来发货，这个过程就叫匹配备货。

匹配备货的意义在于：业务员可以给仓库下发一个明确的指令，协助仓库选用合适的物资发送给客户。匹配的过程就像是分发 ticket, 定向物资要想从仓库出库，必须要有这个 'ticket' 才行。

Schema
---------------------------------------------------------------------------
Column                      | Type  | Note
----------------------------|-------|-------
`goods_id`                  | int   | 
`use_hoard`                 | bool  | 1 代表使用备货，此时 `plan_item_id` 必填
`plan_item_id`              | int   |

还预留了 `quantity`, `status` 等列。

### 外键约束

- `selection.match_hoard_id` 列标记取料的类型；

流程要点
---------------------------------------------------------------------------
业务员新建订单后，如果此订单满足匹配备货的条件，则在评审开始前，强制业务员匹配备货 `order/match-hoard`, 让业务员手动选择对应商品是否使用备货物资，是则选择关联的备货编号。填写完毕后才能正常评审；

仓库取料页面,如果发现 goods 有关联的 `match_hoard` 记录，就提醒仓库这个料优先从客户备货中取料，

其它客户想使用客户备货物资的操作方式
---------------------------------------------------------------------------

其它业务员在对应 goods 下面提交 `match_hoard` 记录，换句话说，这个 `match_hoard` 记录就是使用客户备货定向物资的“门票”，仓库看到票才能取料。
