# 采购单

拆分
---------------------------------------------------------------------------

换货也可以拆分, 换货本质上和采购单一样。

留样
---------------------------------------------------------------------------

采购单中的核心物资必须留一定数量的样品。留够三年，之后可以丢掉。留样分为以下三种类型（使用 `specimen.type` 区分）：

1. 普通(common).这是最理想也是最简单的情况：检测的每个批次都附带的有样品，录入检测数量即可；
2. 共用(shared)：由于采购清单的限制，采购单经常出现这样一种情况：系统内显示的批次不同，但实际上是同一包料。这时只需要创建一个“普通”类型的留样记录，其余批次和它共用留样即可；
3. 强制(compulsory)：这是确保留样规则生效的最后一种情况，防止供应商不附带样品，此时将直接从大货中扣除样品；

###启用和撤销

- `unit/enable-specimen`
- `unit/revoke-specimen` (Edition 承载)

操作列表
---------------------------------------------------------------------------

### purchase-item/build-detection

另一种检测方式，省去重复录入上传报告，实现检测报告的共享使用。共享意味着 inspection 和 detection 可能存在一对多的可能，这就需要在 `detection/delete` 删除关联 inspection 前做一个判断：如果一个 inspection 还被其它 detection 使用，则仅删除关联表，否则连同 inspection 一并删除。详见 Issue 235.
